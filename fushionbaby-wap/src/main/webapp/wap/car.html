<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <title>Fushionbaby-购物车</title>
    <meta name="apple-mobile-web-app-title" content="兜士宝-购物车">
    <script type="text/javascript" src="js/public-headTag-local.js"></script>
    <!-- 公共头部便签，css,js等 -->
    <script src="http://cdn.bootcss.com/zepto/1.1.4/zepto.min.js"></script>
    <script src="js/zepto/event.js"></script>
    <script src="js/zepto/touch.js"></script>
  </head>
  <body id="car">
    <div class="container">
      <div class="public_header fl width100 marginB0">
        <div class="public_header_wrap fl width100">
          <a class="public_back" href="javascript:void(0);"  onclick="history.go(-1);">返回</a>
          购物车
          <a class="public_btn_r disabled" href="javascript:void(0);"></a>
        </div>
      </div>
      <!-- 购物车列表  开始-->
      <div class="public_products_wrap">
        <ul class="list_view_ul OH padding0 margin0">
          <li>
            <a href="javascript:void(0);">
              <div class="public_products_item list_view_item">
                <i class="icon_phone_special"></i>
                <div class="hide_radio_click">
                  <input type="checkbox">
                </div>
                <div class="item_picture">
                  <div class="img_c">
                    <img src="css/images/example.jpg" alt="">
                  </div>
                </div>
                <div class="item_name">
                  <p>Classic Pop Mold经典冰棒模具</p>
                  <span>型号：经典中号</span>
                  <div class="count_num">
                    <span class="reduce"></span>
                    <input type="text" value="5" disabled>
                    <span class="add"></span>
                  </div>
                </div>
                <div class="item_price">￥ 99.00</div>
              </div>
            </a>
            <span class="collection list_view_span">收藏</span>
            <span class="delete list_view_span">删除</span>
          </li>
          <li>
            <a href="javascript:void(0);">
              <div class="public_products_item list_view_item">
                <i class="icon_phone_special"></i>
                <div class="hide_radio_click">
                  <input type="checkbox">
                </div>
                <div class="item_picture">
                  <div class="img_c">
                    <img src="css/images/example.jpg" alt="">
                  </div>
                </div>
                <div class="item_name">
                  <p>Classic Pop Mold经典冰棒模具</p>
                  <span>型号：经典中号</span>
                  <div class="count_num">
                    <span class="reduce"></span>
                    <input type="text" value="1" disabled>
                    <span class="add"></span>
                  </div>
                </div>
                <div class="item_price">￥ 99.00</div>
              </div>
            </a>
            <span class="collection list_view_span">收藏</span>
            <span class="delete list_view_span">删除</span>
          </li>
          <li>
            <a href="javascript:void(0);">
              <div class="public_products_item list_view_item">
                <i class="icon_phone_special"></i>
                <div class="hide_radio_click">
                  <input type="checkbox">
                </div>
                <div class="item_picture">
                  <div class="img_c">
                    <img src="css/images/example.jpg" alt="">
                  </div>
                </div>
                <div class="item_name">
                  <p>Classic Pop Mold经典冰棒模具</p>
                  <span>型号：经典中号</span>
                  <div class="count_num">
                    <span class="reduce"></span>
                    <input type="text" value="1" disabled>
                    <span class="add"></span>
                  </div>
                </div>
                <div class="item_price">￥ 99.00</div>
              </div>
            </a>
            <span class="collection list_view_span">收藏</span>
            <span class="delete list_view_span">删除</span>
          </li>
        </ul>
      </div>
      <!-- 购物车列表  结束-->
      <div class="car_btn_wrap fl">
        <div class="hide_radio_click carCheckAll">
          <input id="carCheckAll" name="carCheckAll" type="radio">
          <label for="carCheckAll">全选</label>
        </div>
        <p>合计：328</p>
        <span>（不包含运费）</span>
        <button class="car_btn" type="button">去结算（4）</button>
      </div>
    </div>
    <!-- 底部悬浮菜单 -->
    <div class="nav_home">
      <a href="index.html">
        <span class="home"></span>
        <p>首页</p>
      </a>
      <a class="open_menu" href="menu.html">
        <span class="menu"></span>
        <p>分类</p>
      </a>
      <a class="nav_home_on" href="car.html">
        <span class="car"><i>10</i></span>
        <p>购物车</p>
      </a>
      <a href="person-center.html">
        <span class="my"></span>
        <p>我的</p>
      </a>
    </div>

    <!-- 收藏列表为空提示 -->
    <section class="car-none">
      <img src="css/images/collect.png">
      <p>您的购物车 空！空！空！</p>
      <p>赶快去购物吧！</p>
      <a href="index.html">去商城逛逛</a>
    </section>

    <!-- 对话框 -->
    <div class="public_modal_backup">
      <div class="public_modal">
        <div class="modal_body">请选择至少一件商品</div>
        <div class="modal_foot">
          <button class="modal_confirm only_confirm">好</button>
        </div>
      </div>
    </div>
    <script>
      $(function(){
        /*去结算按钮*/
        $(".car_btn").click(function() {
          if ($(".list_view_item").find(".checked").length <= 0 ) {
            $('.public_modal_backup').fadeIn();/* 显示对话框  */
          } else {
            /*  do something  */
            window.location='pay.html';
          }
        })

        /*点击全选按钮：遍历列表，选中所有*/
        var carCheckAll = document.getElementById('carCheckAll');
        carCheckAll.onclick = function(){
          $(this).parents(".hide_radio_click").addClass("checked");
          var list = $(".list_view_ul li");
          for(i = 0;i < list.length;i++) {
            list[i].checked = true;
            $(list[i]).find(".hide_radio_click").addClass("checked");
          }
        };
        /*选择单个商品，若全部选中：全选按钮选中；否则全选按钮不选中*/
        $(".list_view_item .hide_radio_click").click(function(){
          var checkedNum = $(".list_view_item").find(".checked").length;
          var listNum = $(".list_view_ul li").length;
          if ($(this).hasClass("checked")) {
            checkedNum = checkedNum-1;
          }
          else {
            checkedNum = checkedNum+1;
          };

          if (checkedNum != listNum) {
            carCheckAll.checked = false;
            $("#carCheckAll").parents(".hide_radio_click").removeClass("checked");
            /*console.log("已选数目："+checkedNum,"，总数目："+listNum,"，非全选");*/
          }
          else {
            carCheckAll.checked = true;
            $("#carCheckAll").parents(".hide_radio_click").addClass("checked");
            /*console.log("已选数目："+checkedNum,"，总数目："+listNum,"，全选");*/
          }
        })

        /*  弹出框：确定按钮  */
        $(".modal_confirm").click(function() {
          /*  do something  */
          $('.public_modal_backup').fadeOut();
        });

      })
    </script>

    <script src="js/zepto/listview.js"></script>
  </body>
</html>